<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Unfettered Mind - Adding User-Defined Language Support to Exuberant Ctags</title>
        <link rel="stylesheet" href="../css/default.css" />
    </head>
    <body>
        <header>
            <div class="logo">
                <a href="../">Unfettered Mind</a>
            </div>
            <nav>
                <a href="../">Home</a>
                <a href="../about.html">About</a>
                <a href="../archive.html">Archive</a>
            </nav>
        </header>

        <main role="main">
            <h1>Adding User-Defined Language Support to Exuberant Ctags</h1>
            <article>
    <section class="header">
        Posted on April  1, 2010
        
    </section>
    <section>
        <p>I’ve been dealing with a lot LZX (OpenLaszlo/Webtop) code since joining Laszlo Systems. LZX is a very dynamic language - akin to JavaScript. IDE support for such languages is innately weak, because there isn’t as much information one can get by static code analysis (that is, without actually running the code).</p>
<p>Luckily it is not very hard to add custom language support to Exuberant Ctags, so not only can we jump around in source files, but we can also make use of other Vim plugins like FuzzyFinder to release the full potential of tags. Here’s how.</p>
<p>To add our language, LZX, the simplest way is to use ctags’ command line options. Since the options are many, we write a file containing them all:</p>
<pre><code>--langdef=lzx
--langmap=lzx:.lzx
--regex-lzx=/^[ \t]*&amp;lt;class[ \t]*name=[&quot;']([A-Za-z0-9_]+)[&quot;']/\1/c,Class/
--regex-lzx=/^[ \t]*&amp;lt;method[ \t]*name=[&quot;']([A-Za-z0-9_]+)[&quot;']/\1/m,Method/
--regex-lzx=/^[ \t]*&amp;lt;handler[ \t]*name=[&quot;']([A-Za-z0-9_]+)[&quot;']/\1/h,Handler/
--regex-lzx=/^[ \t]*&amp;lt;attribute[ \t]*name=[&quot;']([A-Za-z0-9_]+)[&quot;']/\1/a,Attribute/
--exclude=*.as
--exclude=*.bat
--exclude=*.cc
--exclude=*.h
--exclude=*.htm
--exclude=*.html
--exclude=*.java
--exclude=*.js
--exclude=makefile
--exclude=*.mk
--exclude=*.php
--exclude=*.pl
--exclude=*.pm
--exclude=*.py
--exclude=*.rb
--exclude=*.sql
--exclude=*.tex
--exclude=*.vim
--links=no</code></pre>
<p><code>--langdef</code> indicates the name of the user-defined language, while <code>--langmap</code> defines the suffix of its source files. <code>--regex-&lt;LANG&gt;</code> defines the patterns ctags uses to extract tags. The use of <code>--exclude</code> is obvious - I don’t want to collect information (tags) from these files for a LZX project. <code>--links</code> just tells ctags to ignore symbolic links.</p>
<p>Then this is how we tell ctags to use above options and generate tags:</p>
<pre><code>$ ctags --options=ctags-lzx -f &lt;PATH-AND-NAME-OF-THE-TAGS-FILE&gt; -R &lt;BASEDIR-OF-SOURCE-CODE&gt;</code></pre>
<p>Naturally, <code>-R</code> means recursive, and <code>-f</code> specifies our tags file. Normally Vim will pick up the tags file if we follow good habit, but if it doesn’t, we can tell it by:</p>
<pre><code>:set tags+=&lt;PATH-AND-NAME-OF-THE-TAGS-FILE&gt;,&lt;EVEN-MORE-TAGS-FILE&gt;</code></pre>
<p>Then we are ready to jump to most definitions and back by <code>ctrl-]</code>, <code>g]</code> (for multiple matches) and <code>ctrl-T</code>! With FuzzyFinder, try <code>:FufTag&lt;CR&gt;</code>. I’ve already mapped it to <code>&lt;LEADER&gt;t</code> since it’s so brilliant!</p>
    </section>
</article>

        </main>

        <footer>
            Site proudly generated by
            <a href="http://jaspervdj.be/hakyll">Hakyll</a>
        </footer>
    </body>
</html>
