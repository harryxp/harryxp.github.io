<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>Harry Pan's Blog - A Particularly Interesting (nasty) Perl Issue with shift()</title>
        <link rel="stylesheet" type="text/css" href="../css/default.css" />
    </head>
    <body>
        <div id="header">
            <div id="logo">
                <a href="../">Harry Pan's Blog</a>
            </div>
            <div id="navigation">
                <a href="../">Home</a>
                <a href="../about.html">About</a>
                <a href="../archive.html">Archive</a>
            </div>
        </div>

        <div id="content">
            <h1>A Particularly Interesting (nasty) Perl Issue with shift()</h1>

            <div class="info">
    Posted on April 28, 2015
    
</div>

<p>What’s the difference between this</p>
<pre><code>my %h = ('foo' =&gt; 1, 'bar' =&gt; 2);
my @a = values(%h);
print(shift(@a));</code></pre>
<p>and this</p>
<pre><code>my %h = ('foo' =&gt; 1, 'bar' =&gt; 2);
print(shift(values(%h)));</code></pre>
<p>?</p>
<p>Well, the first one works and the second doesn’t. But why in the world? In ANY reasonable modern programming language, doing this kind of inlining should be fine.</p>
<p><a href="http://perldoc.perl.org/functions/shift.html">It turns out that <code>shift</code> has two forms that take a single argument.</a> If its argument is anything but an array (that is, an expression that evaluates to an array doesn’t count), it considers the argument to be an array ref. So in the second piece of code it tries to dereference an array and fails. Shocked? Horrified? Tell me about it.</p>

        </div>
        <div id="footer">
            Site proudly generated by
            <a href="http://jaspervdj.be/hakyll">Hakyll</a>
        </div>
    </body>
</html>
