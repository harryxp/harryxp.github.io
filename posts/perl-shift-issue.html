<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Unfettered Mind - A Particularly Interesting (nasty) Perl Issue with shift()</title>
        <link rel="stylesheet" href="../css/default.css" />
    </head>
    <body>
        <header>
            <div class="logo">
                <a href="../">Unfettered Mind</a>
            </div>
            <nav>
                <a href="../">Home</a>
                <a href="../about.html">About</a>
                <a href="../archive.html">Archive</a>
            </nav>
        </header>

        <main role="main">
            <h1>A Particularly Interesting (nasty) Perl Issue with shift()</h1>
            <article>
    <section class="header">
        Posted on April 28, 2015
        
    </section>
    <section>
        <p>What’s the difference between this</p>
<pre><code>my %h = ('foo' =&gt; 1, 'bar' =&gt; 2);
my @a = values(%h);
print(shift(@a));</code></pre>
<p>and this</p>
<pre><code>my %h = ('foo' =&gt; 1, 'bar' =&gt; 2);
print(shift(values(%h)));</code></pre>
<p>?</p>
<p>Well, the first one works and the second doesn’t. But why in the world? In ANY reasonable modern programming language, doing this kind of inlining should be fine.</p>
<p><a href="http://perldoc.perl.org/functions/shift.html">It turns out that <code>shift</code> has two forms that take a single argument.</a> If its argument is anything but an array (that is, an expression that evaluates to an array doesn’t count), it considers the argument to be an array ref. So in the second piece of code it tries to dereference an array and fails. Shocked? Horrified? Tell me about it.</p>
    </section>
</article>

        </main>

        <footer>
            Site proudly generated by
            <a href="http://jaspervdj.be/hakyll">Hakyll</a>
        </footer>
    </body>
</html>
